<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container">
    <a class="navbar-brand" href="/"><img src="images/recordriots-logo.png" alt="Record Riots!"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse text-center" id="navbarResponsive">
      <!--  if logged in, show email, add a show and log out -->
      <ul class="navbar-nav ml-auto">
        {{#if isLoggedIn}}
        <li class="nav-item">
          <span class="nav-link">Welcome, {{username}}</span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/add-show">Add Show</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/my-shows">My Shows</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/logout">Log Out</a>
        </li>
        {{else}}
        <li class="nav-item">
          <a class="nav-link" href="/login">Login</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/register">Register</a>
        </li>
        {{/if}}
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <br>
  <h3>My Shows:</h3>
  <br> {{#if message_exists}}
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    {{message}}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
  </div>
  {{/if}}
  <table class="table table-striped">
    <tbody>
      {{#each shows}}
      <tr>
        <td>
          {{this.date}} <br> {{this.name}} <br>
          <a href="https://maps.google.com/?q={{this.address}}+{{this.city}}+{{this.state}}" target="_blank">
                {{this.venue}}, {{this.city}}, {{this.state}} <br>
              </a> Time: {{this.start}} to {{this.end}} <br> Admission: {{this.admission}} <br> Details: {{this.details}} <br> Posted by: {{this.posted_by}} <br>
          <a href="/edit-show/{{this.id}}">Edit</a><span> | </span><a href="#" data-toggle="modal" data-target="#confirmDeleteModal">Delete</a>
        </td>
      </tr>
      <!-- Modal -->
      <div class="modal fade" id="confirmDeleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Confirm Delete</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              Are you sure you want to delete "{{this.name}}"?
            </div>
            <div class="modal-footer">
              <form action="/delete-show" method="post">
                <input type="hidden" name="id" value="{{this.id}}">
                <button class="btn btn-danger" type="submit">Delete</button>
              </form>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            </div>
          </div>
        </div>
      </div>
      {{/each}}
    </tbody>
  </table>
</div>
</div>